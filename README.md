# Video Lane Detection and Stabilization

This repository contains a collection of Python scripts for video processing, focusing on lane detection, vehicle tracking, and video stabilization.

## Scripts Overview

### Lane Detection and Vehicle Tracking

#### `addlanenumber.py`
This script adds lane numbers onto the input video.
- **Controls:**
  - **A**: Create a new lane
  - **C**: Delete a lane
  - **D**: Undo action
- **Output**: Generates a `.npy` file containing lane information

#### `addLaneNew.py`
This script processes vehicle data with lane information.
- **Input**: 
  - CSV file with vehicle data
  - NPY file generated by `addlanenumber.py`
- **Output**: CSV file containing vehicle data with lane information

### Video Stabilization

#### `stabCheck.py`
Checks video stability quality by monitoring selected key points.
- Automatically adjusts frames if key points movement is detected

#### `stabTest4.py` 
Automatically stabilizes drone video footage using selected markers

#### `stabilization1.py`
Stabilizes video using 5 key points (number is adjustable)


### Coordinate Transformation

#### `getM-Copy1.ipynb`
This Jupyter notebook calculates homographic matrices to convert between pixel coordinates and real-world GPS coordinates.
- **Input**: Output data from ARCIS
- **Output**: Transformation matrices for coordinate conversion


## Usage

1. First, process your video with `addlanenumber.py` to define lanes
2. Use the generated NPY file along with your vehicle data CSV in `addLaneNew.py`
3. For video stabilization, use either:
   - `stabCheck.py` for stability quality checking
   - `stabTest4.py` for automatic drone footage stabilization
   - `stabilization1.py` for manual key point-based stabilization

## Requirements

- Python 3.8.13
- OpenCV
- NumPy
- Pandas

## Example Workflow

```
# Run the Jupyter notebook to get GPS coordinates
jupyter notebook getM-Copy1.ipynb
```
